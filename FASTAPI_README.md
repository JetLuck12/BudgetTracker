# üöÄ FastAPI Integration –¥–ª—è Budget Tracker

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API –Ω–∞ –±–∞–∑–µ FastAPI, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –±—é–¥–∂–µ—Ç–æ–º —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ core/           # –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ ui/            # PyQt6 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îú‚îÄ‚îÄ api/            # FastAPI —Å–µ—Ä–≤–µ—Ä (–Ω–æ–≤—ã–π)
‚îÇ   ‚îú‚îÄ‚îÄ main.py     # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ models.py   # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ dependencies.py # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ routers/    # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ transactions.py
‚îÇ       ‚îú‚îÄ‚îÄ plan.py
‚îÇ       ‚îú‚îÄ‚îÄ analytics.py
‚îÇ       ‚îî‚îÄ‚îÄ import.py
‚îî‚îÄ‚îÄ main.py        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ PyQt6
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

## üöÄ –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Python —Å–∫—Ä–∏–ø—Ç
```bash
python run_api.py
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ bat —Ñ–∞–π–ª (Windows)
```bash
run_api.bat
```

### –°–ø–æ—Å–æ–± 3: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ uvicorn
```bash
uvicorn src.api.main:app --reload --host 0.0.0.0 --port 8000
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:8000

## üåê –í–µ–±-–∫–ª–∏–µ–Ω—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `web_client.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

## üì° API Endpoints

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/transactions` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ |
| POST | `/api/transactions` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |
| DELETE | `/api/transactions/{id}` | –£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |
| GET | `/api/transactions/summary` | –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º |
| GET | `/api/transactions/categories` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |

### –ü–ª–∞–Ω—ã –±—é–¥–∂–µ—Ç–∞

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/plan` | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω |
| POST | `/api/plan` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–ª–∞–Ω |
| PUT | `/api/plan` | –û–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω |
| GET | `/api/plan/progress` | –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–∞ |

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/analytics/summary` | –û–±—â–∞—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ |
| GET | `/api/analytics/categories` | –°–≤–æ–¥–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º |
| GET | `/api/analytics/weekday` | –†–∞—Å—Ö–æ–¥—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ |
| GET | `/api/analytics/top-categories` | –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ |
| GET | `/api/analytics/graph` | –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ |
| GET | `/api/analytics/full` | –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/import/csv` | –ò–º–ø–æ—Ä—Ç –∏–∑ CSV —Ñ–∞–π–ª–∞ |
| POST | `/api/import/excel` | –ò–º–ø–æ—Ä—Ç –∏–∑ Excel —Ñ–∞–π–ª–∞ |

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```bash
curl -X GET "http://localhost:8000/api/transactions"
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```bash
curl -X POST "http://localhost:8000/api/transactions" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 1500.0,
    "category": "–ü—Ä–æ–¥—É–∫—Ç—ã",
    "note": "–ü–æ–∫—É–ø–∫–∞ –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–µ",
    "date": "2024-01-15",
    "type": "–°–ø–∏—Å–∞–Ω–∏–µ"
  }'
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–≤–æ–¥–∫–∏

```bash
curl -X GET "http://localhost:8000/api/analytics/summary"
```

### 4. –ò–º–ø–æ—Ä—Ç CSV —Ñ–∞–π–ª–∞

```bash
curl -X POST "http://localhost:8000/api/import/csv" \
  -F "file=@transactions.csv"
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `run_api.py`:

```python
uvicorn.run(
    "src.api.main:app",
    host="0.0.0.0",
    port=8080,  # –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –∑–¥–µ—Å—å
    reload=True,
    log_level="info"
)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS

–í —Ñ–∞–π–ª–µ `src/api/main.py` –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS:

```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],  # –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã
    allow_credentials=True,
    allow_methods=["GET", "POST", "PUT", "DELETE"],
    allow_headers=["*"],
)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ curl

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
curl -X GET "http://localhost:8000/health"

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
curl -X GET "http://localhost:8000/api/transactions"

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
curl -X POST "http://localhost:8000/api/transactions" \
  -H "Content-Type: application/json" \
  -d '{"amount": 100, "category": "–¢–µ—Å—Ç", "note": "–¢–µ—Å—Ç–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è", "date": "2024-01-01", "type": "–°–ø–∏—Å–∞–Ω–∏–µ"}'
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Python

```python
import requests

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
response = requests.get("http://localhost:8000/api/transactions")
print(response.json())

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
data = {
    "amount": 100.0,
    "category": "–¢–µ—Å—Ç",
    "note": "–¢–µ—Å—Ç–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è",
    "date": "2024-01-01",
    "type": "–°–ø–∏—Å–∞–Ω–∏–µ"
}
response = requests.post("http://localhost:8000/api/transactions", json=data)
print(response.json())
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:

1. JWT —Ç–æ–∫–µ–Ω—ã
2. API –∫–ª—é—á–∏
3. Rate limiting
4. HTTPS

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
uvicorn src.api.main:app --reload
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
```bash
uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --workers 4
```

### Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY src/ ./src/
EXPOSE 8000

CMD ["uvicorn", "src.api.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

API –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:

- **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** (React, Vue, Angular)
- **–ú–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** (React Native, Flutter)
- **–î–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** (Electron)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏** (Python —Å–∫—Ä–∏–ø—Ç—ã)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å –±–∞–Ω–∫–∞–º–∏** (Open Banking API)

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
–°–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `log_level` –≤ `run_api.py`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
curl -X GET "http://localhost:8000/health"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:

- Prometheus –º–µ—Ç—Ä–∏–∫–∏
- Health checks
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –ª–∏—Ü–µ–Ω–∑–∏—é, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π Budget Tracker.
